os2iotBackend:
  image:
    registry: ghcr.io/itk-dev
    repository: os2iot-backend
    tag: 'latest'
    pullPolicy: Always

  replicaCount: 1

  # Node selector for pod scheduling (e.g., restrict to specific region)
  nodeSelector:
    topology.kubernetes.io/region: fsn1

  ingress:
    host: backend.os2iot.itkdev.dk

  resources:
    limits:
      cpu: 2000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi

  database:
    # Shared PostgreSQL cluster service name (cluster-name-rw.namespace)
    # Use short name for cross-namespace DNS - Node.js has issues with full FQDN
    hostname: postgres-cluster-rw.postgres
    port: "5432"
    name: os2iot
    username: os2iot
    # Reference to shared postgres secret for password (must be sealed in os2iot-backend namespace)
    passwordSecretName: postgres-cluster-os2iot
    passwordSecretKey: password

  kafka:
    hostname: kafka-svc.kafka
    port: "9092"

  chirpstack:
    hostname: chirpstack-clusterip-svc.chirpstack
    port: "8081"
    # API key stored in sealed secret
    apiKeySecretName: chirpstack-api-key
    apiKeySecretKey: apiKey

  mqtt:
    csHostname: mosquitto-svc.mosquitto
    csPort: "1883"
    brokerHostname: mqtt.os2iot.itkdev.dk
    superUserPassword: ""

  backend:
    baseUrl: "https://os2iot.itkdev.dk"

  kombit:
    certificatePrivateKey: ""
    entryPoint: ""

  log:
    level: error

  email:
    host: smtp.local
    port: "587"
    from: ""
    secretName: os2iot-backend-email
    userSecretKey: user
    passSecretKey: pass

  encryption:
    secretName: os2iot-backend-encryption
    secretKey: symmetricKey

  bootstrapJob:
    enabled: true  # Set to false to skip automatic bootstrap
    secretName: os2iot-bootstrap
    usernameKey: username
    passwordKey: password
